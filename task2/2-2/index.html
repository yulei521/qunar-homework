<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>作业2-特效2-第二种方法直接用js实现</title>
    <style>
        body {
            font-size: 14px;
        }

        body, div {
            margin: 0;
            padding: 0;
        }

        div {
            box-sizing: border-box;
        }

        .scroll-img {
            width: 1015px;
            height: 477px;
            margin: auto;
            position: relative;
        }

        .scroll-img .img {
            float: left;
            width: 180px;
            border-left: 1px solid #999;
            border-right: 1px solid #999;
            border-bottom: 1px solid #999;
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }

        .scroll-img .img.item0 {
            width: 475px;
        }

        .scroll-img .img.item1 {
            left: -1px;
        }

        .scroll-img .img.item2 {
            left: -2px;
        }

        .scroll-img .img.item3 {
            left: -3px;
        }
    </style>
</head>
<body>
<div class="scroll-img" id="scroll-img">
    <div class="img item0" onmouseover="changeImgItem(0)"><img src="../images/door1.png"></div>
    <div class="img item1" onmouseover="changeImgItem(1)"><img src="../images/door2.png"></div>
    <div class="img item2" onmouseover="changeImgItem(2)"><img src="../images/door3.png"></div>
    <div class="img item3" onmouseover="changeImgItem(3)"><img src="../images/door4.png"></div>
</div>
<script>

    currentActiveImgIndex = 0;
	minWidth = 180;
	maxWidth = 475;
	timerId = -1;

	function changeImgWidth(imgDivs, originIndex, desIndex, eachTime, eachChange){
		var tempMinWidth = maxWidth,
			tempMaxWidth = minWidth;
		function changeWidth(){
			if(tempMinWidth > minWidth && tempMaxWidth < maxWidth){
				tempMinWidth = tempMinWidth - eachChange;
				tempMaxWidth = tempMaxWidth + eachChange;
				imgDivs[originIndex].style.width = tempMinWidth + "px";
				imgDivs[desIndex].style.width = tempMaxWidth + "px";
				setTimeout(changeWidth, eachTime);
			}else {
				
			}
		}
		setTimeout(changeWidth, eachTime);
	}

    function getImgDivs() {
        var scrollId = document.getElementById("scroll-img");
        var imgDivs = scrollId.getElementsByTagName("div");
        return imgDivs;
    }

    function changeImgItem(index) {
		if (index == currentActiveImgIndex)return;
		var imgDivs = getImgDivs();
	    if(timerId != -1){
			clearTimeout(timerId);
		}
		timerId = setTimeout(function(){
			changeImgWidth(imgDivs, currentActiveImgIndex, index, 10, 10);
			currentActiveImgIndex = index;
		}, 200);	
    }
</script>
</body>
</html>